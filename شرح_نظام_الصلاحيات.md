# ๐ ุดุฑุญ ูุธุงู ุงูุตูุงุญูุงุช ูู DED ERP System

## ๐ฏ ููู ูุนูู ูุธุงู ุงูุตูุงุญูุงุชุ

### **1. ุงููุณุชุฎุฏููู (Users)**
- ูู ูุณุชุฎุฏู ูู ุญุณุงุจ ุฎุงุต ุจู
- ูุญุชูู ุนูู: ุงุณู ุงููุณุชุฎุฏูุ ูููุฉ ุงููุฑูุฑุ ุงูุจุฑูุฏ ุงูุฅููุชุฑูููุ ุฅูุฎ

### **2. ุงูุฃุฏูุงุฑ (Roles)**
- ุงูุฏูุฑ ูู ูุฌููุนุฉ ูู ุงูุตูุงุญูุงุช
- ูุซุงู: ุฏูุฑ "admin" ูุญุชูู ุนูู ุฌููุน ุงูุตูุงุญูุงุช (94 ุตูุงุญูุฉ)
- ูุซุงู: ุฏูุฑ "ูุญุงุณุจ" ูุญุชูู ุนูู ุตูุงุญูุงุช ุงููุญุงุณุจุฉ ููุท

### **3. ุงูุตูุงุญูุงุช (Permissions)**
- ุงูุตูุงุญูุฉ ูู ุฅุฐู ูููุตูู ุฅูู ุตูุญุฉ ุฃู ููุฒุฉ ูุนููุฉ
- ูุซุงู: `dashboard.view` - ุตูุงุญูุฉ ุนุฑุถ ููุญุฉ ุงูุชุญูู
- ูุซุงู: `inventory.stock.view` - ุตูุงุญูุฉ ุนุฑุถ ุงููุฎุฒูู
- ูุซุงู: `sales.invoices.add` - ุตูุงุญูุฉ ุฅุถุงูุฉ ููุงุชูุฑ ูุจูุนุงุช

---

## ๐ ุงูุนูุงูุฉ ุจูู ุงููุณุชุฎุฏู ูุงูุตูุงุญูุงุช

```
ุงููุณุชุฎุฏู (User)
    โ
    ูู ุฏูุฑ ูุงุญุฏ (Role)
    โ
    ุงูุฏูุฑ ูุญุชูู ุนูู ุนุฏุฉ ุตูุงุญูุงุช (Permissions)
```

**ูุซุงู:**
```
ุงููุณุชุฎุฏู: ali
    โ
    ุงูุฏูุฑ: admin
    โ
    ุงูุตูุงุญูุงุช: 94 ุตูุงุญูุฉ (ุฌููุน ุงูุตูุงุญูุงุช)
```

---

## โ ููู ูุชู ููุญ ุงูุตูุงุญูุงุช ูููุณุชุฎุฏูุ

### **ุงูุทุฑููุฉ 1: ุนู ุทุฑูู ุงูุฏูุฑ (Role)**

1. **ุฅูุดุงุก ุฏูุฑ ุฌุฏูุฏ:**
   - ุงุฐูุจ ุฅูู: `ุงูุฅุนุฏุงุฏุงุช` โ `ุฅุฏุงุฑุฉ ุงูุฃุฏูุงุฑ`
   - ุงููุฑ ุนูู `ุฅุถุงูุฉ ุฏูุฑ ุฌุฏูุฏ`
   - ุฃุฏุฎู ุงุณู ุงูุฏูุฑ (ูุซู: "ูุญุงุณุจ")

2. **ุฅุถุงูุฉ ุตูุงุญูุงุช ููุฏูุฑ:**
   - ุงุฎุชุฑ ุงูุฏูุฑ
   - ุงููุฑ ุนูู `ุชุนุฏูู ุงูุตูุงุญูุงุช`
   - ุงุฎุชุฑ ุงูุตูุงุญูุงุช ุงููุทููุจุฉ
   - ุงุญูุธ

3. **ุฑุจุท ุงููุณุชุฎุฏู ุจุงูุฏูุฑ:**
   - ุงุฐูุจ ุฅูู: `ุงูุฅุนุฏุงุฏุงุช` โ `ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู`
   - ุงุฎุชุฑ ุงููุณุชุฎุฏู
   - ุงููุฑ ุนูู `ุชุนุฏูู`
   - ุงุฎุชุฑ ุงูุฏูุฑ ูู ุงููุงุฆูุฉ ุงูููุณุฏูุฉ
   - ุงุญูุธ

### **ุงูุทุฑููุฉ 2: ุฌุนู ุงููุณุชุฎุฏู ูุฏูุฑ (Admin)**

- ุงููุฏูุฑ (Admin) ูุฏูู ุฌููุน ุงูุตูุงุญูุงุช ุชููุงุฆูุงู
- ูุง ูุญุชุงุฌ ุฅูู ุฏูุฑ ูุญุฏุฏ
- ููููู ุงููุตูู ุฅูู ุฌููุน ุงูุตูุญุงุช

**ููููุฉ ุฌุนู ูุณุชุฎุฏู ูุฏูุฑ:**
```sql
UPDATE users SET is_admin = 1 WHERE username = 'ุงุณู_ุงููุณุชุฎุฏู';
```

---

## ๐ซ ููุงุฐุง ูุง ูุณุชุทูุน ุงููุณุชุฎุฏู ุชุณุฌูู ุงูุฏุฎููุ

### **ุงูุณุจุจ 1: ุงููุณุชุฎุฏู ุบูุฑ ูุดุท**
```sql
-- ุงูุชุญูู:
SELECT is_active FROM users WHERE username = 'ุงุณู_ุงููุณุชุฎุฏู';

-- ุงูุญู:
UPDATE users SET is_active = 1 WHERE username = 'ุงุณู_ุงููุณุชุฎุฏู';
```

### **ุงูุณุจุจ 2: ุงููุณุชุฎุฏู ููุณ ูุฏูู ุฏูุฑ**
```sql
-- ุงูุชุญูู:
SELECT role_id FROM users WHERE username = 'ุงุณู_ุงููุณุชุฎุฏู';

-- ุงูุญู: ุฑุจุท ุงููุณุชุฎุฏู ุจุฏูุฑ admin
UPDATE users SET role_id = 1 WHERE username = 'ุงุณู_ุงููุณุชุฎุฏู';
```

### **ุงูุณุจุจ 3: ุงูุฏูุฑ ููุณ ูุฏูู ุตูุงุญูุงุช**
```sql
-- ุงูุชุญูู:
SELECT COUNT(*) FROM role_permissions WHERE role_id = 1;

-- ุงูุญู: ุฅุถุงูุฉ ุตูุงุญูุงุช ููุฏูุฑ (ุงุณุชุฎุฏู ุงูุณูุฑูุจุช fix_index_permissions.py)
```

---

## ๐ ุฃูุซูุฉ ุนูููุฉ

### **ูุซุงู 1: ุฅูุดุงุก ูุณุชุฎุฏู ุฌุฏูุฏ ุจุตูุงุญูุงุช ูุงููุฉ**

```python
# ุงุณุชุฎุฏู ุงูุณูุฑูุจุช ุงูุชุงูู:
python create_new_user.py
```

### **ูุซุงู 2: ุฅุตูุงุญ ูุณุชุฎุฏู ููุฌูุฏ**

```python
# ุงุณุชุฎุฏู ุงูุณูุฑูุจุช ุงูุชุงูู:
python fix_user_ali.py
```

---

## ๐ ุจูุงูุงุช ุชุณุฌูู ุงูุฏุฎูู ุงูุญุงููุฉ

### **ุงููุณุชุฎุฏู 1: admin**
```
ุงุณู ุงููุณุชุฎุฏู: admin
ูููุฉ ุงููุฑูุฑ: admin123
ุงูุฏูุฑ: admin (94 ุตูุงุญูุฉ)
ุงูุญุงูุฉ: โ ูุดุท
```

### **ุงููุณุชุฎุฏู 2: ali**
```
ุงุณู ุงููุณุชุฎุฏู: ali
ูููุฉ ุงููุฑูุฑ: ali123
ุงูุฏูุฑ: admin (94 ุตูุงุญูุฉ)
ุงูุญุงูุฉ: โ ูุดุท
```

---

## ๐ ูุงุฆูุฉ ุงูุตูุงุญูุงุช ุงูุฑุฆูุณูุฉ

| ุงูุตูุงุญูุฉ | ุงููุตู |
|---------|-------|
| `dashboard.view` | ุนุฑุถ ููุญุฉ ุงูุชุญูู |
| `inventory.view` | ุนุฑุถ ุงููุฎุฒูู |
| `inventory.stock.view` | ุนุฑุถ ุงููุฎุฒูู |
| `inventory.damaged.view` | ุนุฑุถ ุงููุฎุฒูู ุงูุชุงูู |
| `sales.view` | ุนุฑุถ ุงููุจูุนุงุช |
| `sales.invoices.add` | ุฅุถุงูุฉ ููุงุชูุฑ ูุจูุนุงุช |
| `purchases.view` | ุนุฑุถ ุงููุดุชุฑูุงุช |
| `settings.users.view` | ุนุฑุถ ุงููุณุชุฎุฏููู |
| `settings.users.manage` | ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู |

---

## โ ุงูุฎูุงุตุฉ

1. **ููู ูุณุชุทูุน ุงููุณุชุฎุฏู ุชุณุฌูู ุงูุฏุฎูู:**
   - ูุฌุจ ุฃู ูููู `is_active = 1`
   - ูุฌุจ ุฃู ูููู ูู `role_id` (ุฏูุฑ ูุญุฏุฏ)
   - ุฃู ูููู `is_admin = 1`

2. **ููู ูุณุชุทูุน ุงููุณุชุฎุฏู ุงููุตูู ุฅูู ุตูุญุฉ ูุนููุฉ:**
   - ูุฌุจ ุฃู ูููู ูุฏูู ุงูุตูุงุญูุฉ ุงููุทููุจุฉ
   - ุฃู ูููู ูุฏูุฑ (`is_admin = 1`)

3. **ุงูุฏูุฑ (Role) ูุญุชูู ุนูู ูุฌููุนุฉ ูู ุงูุตูุงุญูุงุช**
   - ูููู ุฅูุดุงุก ุฃุฏูุงุฑ ูุฎุตุตุฉ
   - ูููู ุชุนุฏูู ุตูุงุญูุงุช ุงูุฃุฏูุงุฑ

---

## ๐ ุฅุฐุง ูุงุฌูุช ูุดููุฉ

1. **ุชุญูู ูู ุฃู ุงููุณุชุฎุฏู ูุดุท:**
   ```sql
   SELECT is_active FROM users WHERE username = 'ุงุณู_ุงููุณุชุฎุฏู';
   ```

2. **ุชุญูู ูู ุฃู ุงููุณุชุฎุฏู ูู ุฏูุฑ:**
   ```sql
   SELECT role_id FROM users WHERE username = 'ุงุณู_ุงููุณุชุฎุฏู';
   ```

3. **ุชุญูู ูู ุฃู ุงูุฏูุฑ ูู ุตูุงุญูุงุช:**
   ```sql
   SELECT COUNT(*) FROM role_permissions WHERE role_id = (SELECT role_id FROM users WHERE username = 'ุงุณู_ุงููุณุชุฎุฏู');
   ```

4. **ุงุณุชุฎุฏู ุงูุณูุฑูุจุชุงุช ุงูุฌุงูุฒุฉ:**
   - `fix_user_ali.py` - ูุฅุตูุงุญ ูุณุชุฎุฏู ูุนูู
   - `fix_index_permissions.py` - ูุฅุถุงูุฉ ุตูุงุญูุงุช
   - `reset_admin_password.py` - ูุฅุนุงุฏุฉ ุชุนููู ูููุฉ ูุฑูุฑ admin

